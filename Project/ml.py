# -*- coding: utf-8 -*-

# Form implementation generated from reading ui file 'ml.ui'
#
# Created by: PyQt5 UI code generator 5.11.3
#
# WARNING! All changes made in this file will be lost!

from PyQt5 import QtCore, QtGui, QtWidgets
#import pymysql
from sqllite import entry_ml
import datetime
b=[]
q=r=s=t=u=v=w=x=y=1



def machine(test_new):
        import pandas as pd
        import numpy as np
        from sklearn import metrics
        import matplotlib.pyplot as plt
        names=['id','clump thickness','uni of cell size','uni of cell shape',
               'marginal adhesion','cell size','bare nuclei','bland chromation',
               'normal nucleoli','mitoses','class']
        data = pd.read_csv("db.data",names=names)
        data.set_index('id', inplace=True)
        pd.set_option('display.max_columns',None)
        data['bare nuclei'].replace('?',np.nan,inplace=True)
        data["bare nuclei"] = pd.to_numeric(data["bare nuclei"])
        x=data.mean().astype(int)
        data=data.fillna(x)
        X=data.iloc[:,0:9]
        X=X.values
        y=data.iloc[:,9]
        y=y.values
        from sklearn.model_selection import train_test_split
        X_train,X_test,y_train,y_test=train_test_split(X,y,test_size=0.05)
        from sklearn.neighbors import KNeighborsClassifier
        knn= KNeighborsClassifier(n_neighbors=7)
        knn.fit(X_train,y_train)

        #test_new=[5,1,1,1,2,1,3,1,1]
        #print(test_new)
        out=knn.predict([test_new])
        if(out==[2]):
                #print("Benign (non-cancerous breast condition)")
                return out
                #msg1('Warning','Benign (non-cancerous breast condition)')
        elif(out==[4]):
                #print("Malignant (Cancerous breast condition")
                return out
                
        #print(out)

class Ui_ml(object):

        def message(self, msg):
                mess = QtWidgets.QMessageBox()
                mess.setWindowTitle('Message')
                mess.setText(msg)
                mess.setStandardButtons(QtWidgets.QMessageBox.Ok)
                mess.exec_()

                    
        def setupUi(self, ml):
                ml.setObjectName("ml")
                ml.resize(690, 540)
                self.label = QtWidgets.QLabel(ml)
                self.label.setGeometry(QtCore.QRect(90, 30, 400, 21))
                font = QtGui.QFont()
                font.setPointSize(15)
                font.setBold(True)
                font.setUnderline(True)
                font.setWeight(75)
                self.label.setFont(font)
                self.label.setAlignment(QtCore.Qt.AlignCenter)
                self.label.setObjectName("label")
                self.widget = QtWidgets.QWidget(ml)
                self.widget.setGeometry(QtCore.QRect(90, 80, 411, 370))
                self.widget.setObjectName("widget")
                self.verticalLayout = QtWidgets.QVBoxLayout(self.widget)
                self.verticalLayout.setContentsMargins(0, 0, 0, 0)
                self.verticalLayout.setObjectName("verticalLayout")
                self.horizontalLayout = QtWidgets.QHBoxLayout()
                self.horizontalLayout.setObjectName("horizontalLayout")
                self.label_2 = QtWidgets.QLabel(self.widget)
                font = QtGui.QFont()
                font.setPointSize(15)
                self.label_2.setFont(font)
                self.label_2.setObjectName("label_2")
                self.horizontalLayout.addWidget(self.label_2)
                self.comboBox = QtWidgets.QComboBox(self.widget)
                self.comboBox.setObjectName("comboBox")
                self.comboBox.addItem("")
                self.comboBox.addItem("")
                self.comboBox.addItem("")
                self.comboBox.addItem("")
                self.comboBox.addItem("")
                self.comboBox.addItem("")
                self.comboBox.addItem("")
                self.comboBox.addItem("")
                self.comboBox.addItem("")
                self.comboBox.addItem("")
                self.horizontalLayout.addWidget(self.comboBox)
                self.verticalLayout.addLayout(self.horizontalLayout)
                self.horizontalLayout_2 = QtWidgets.QHBoxLayout()
                self.horizontalLayout_2.setObjectName("horizontalLayout_2")
                self.label_3 = QtWidgets.QLabel(self.widget)
                font = QtGui.QFont()
                font.setPointSize(15)
                self.label_3.setFont(font)
                self.label_3.setObjectName("label_3")
                self.horizontalLayout_2.addWidget(self.label_3)
                self.comboBox_2 = QtWidgets.QComboBox(self.widget)
                self.comboBox_2.setObjectName("comboBox_2")
                self.comboBox_2.addItem("")
                self.comboBox_2.addItem("")
                self.comboBox_2.addItem("")
                self.comboBox_2.addItem("")
                self.comboBox_2.addItem("")
                self.comboBox_2.addItem("")
                self.comboBox_2.addItem("")
                self.comboBox_2.addItem("")
                self.comboBox_2.addItem("")
                self.comboBox_2.addItem("")
                self.horizontalLayout_2.addWidget(self.comboBox_2)
                self.verticalLayout.addLayout(self.horizontalLayout_2)
                self.horizontalLayout_3 = QtWidgets.QHBoxLayout()
                self.horizontalLayout_3.setObjectName("horizontalLayout_3")
                self.label_4 = QtWidgets.QLabel(self.widget)
                font = QtGui.QFont()
                font.setPointSize(15)
                self.label_4.setFont(font)
                self.label_4.setObjectName("label_4")
                self.horizontalLayout_3.addWidget(self.label_4)
                self.comboBox_3 = QtWidgets.QComboBox(self.widget)
                self.comboBox_3.setObjectName("comboBox_3")
                self.comboBox_3.addItem("")
                self.comboBox_3.addItem("")
                self.comboBox_3.addItem("")
                self.comboBox_3.addItem("")
                self.comboBox_3.addItem("")
                self.comboBox_3.addItem("")
                self.comboBox_3.addItem("")
                self.comboBox_3.addItem("")
                self.comboBox_3.addItem("")
                self.comboBox_3.addItem("")
                self.horizontalLayout_3.addWidget(self.comboBox_3)
                self.verticalLayout.addLayout(self.horizontalLayout_3)
                self.horizontalLayout_4 = QtWidgets.QHBoxLayout()
                self.horizontalLayout_4.setObjectName("horizontalLayout_4")
                self.label_5 = QtWidgets.QLabel(self.widget)
                font = QtGui.QFont()
                font.setPointSize(15)
                self.label_5.setFont(font)
                self.label_5.setObjectName("label_5")
                self.horizontalLayout_4.addWidget(self.label_5)
                self.comboBox_4 = QtWidgets.QComboBox(self.widget)
                self.comboBox_4.setObjectName("comboBox_4")
                self.comboBox_4.addItem("")
                self.comboBox_4.addItem("")
                self.comboBox_4.addItem("")
                self.comboBox_4.addItem("")
                self.comboBox_4.addItem("")
                self.comboBox_4.addItem("")
                self.comboBox_4.addItem("")
                self.comboBox_4.addItem("")
                self.comboBox_4.addItem("")
                self.comboBox_4.addItem("")
                self.horizontalLayout_4.addWidget(self.comboBox_4)
                self.verticalLayout.addLayout(self.horizontalLayout_4)
                self.horizontalLayout_5 = QtWidgets.QHBoxLayout()
                self.horizontalLayout_5.setObjectName("horizontalLayout_5")
                self.label_6 = QtWidgets.QLabel(self.widget)
                font = QtGui.QFont()
                font.setPointSize(15)
                self.label_6.setFont(font)
                self.label_6.setObjectName("label_6")
                self.horizontalLayout_5.addWidget(self.label_6)
                self.comboBox_5 = QtWidgets.QComboBox(self.widget)
                self.comboBox_5.setObjectName("comboBox_5")
                self.comboBox_5.addItem("")
                self.comboBox_5.addItem("")
                self.comboBox_5.addItem("")
                self.comboBox_5.addItem("")
                self.comboBox_5.addItem("")
                self.comboBox_5.addItem("")
                self.comboBox_5.addItem("")
                self.comboBox_5.addItem("")
                self.comboBox_5.addItem("")
                self.comboBox_5.addItem("")
                self.horizontalLayout_5.addWidget(self.comboBox_5)
                self.verticalLayout.addLayout(self.horizontalLayout_5)
                self.horizontalLayout_6 = QtWidgets.QHBoxLayout()
                self.horizontalLayout_6.setObjectName("horizontalLayout_6")
                self.label_7 = QtWidgets.QLabel(self.widget)
                font = QtGui.QFont()
                font.setPointSize(15)
                self.label_7.setFont(font)
                self.label_7.setObjectName("label_7")
                self.horizontalLayout_6.addWidget(self.label_7)
                self.comboBox_6 = QtWidgets.QComboBox(self.widget)
                self.comboBox_6.setObjectName("comboBox_6")
                self.comboBox_6.addItem("")
                self.comboBox_6.addItem("")
                self.comboBox_6.addItem("")
                self.comboBox_6.addItem("")
                self.comboBox_6.addItem("")
                self.comboBox_6.addItem("")
                self.comboBox_6.addItem("")
                self.comboBox_6.addItem("")
                self.comboBox_6.addItem("")
                self.comboBox_6.addItem("")
                self.horizontalLayout_6.addWidget(self.comboBox_6)
                self.verticalLayout.addLayout(self.horizontalLayout_6)
                self.horizontalLayout_7 = QtWidgets.QHBoxLayout()
                self.horizontalLayout_7.setObjectName("horizontalLayout_7")
                self.label_8 = QtWidgets.QLabel(self.widget)
                font = QtGui.QFont()
                font.setPointSize(15)
                self.label_8.setFont(font)
                self.label_8.setObjectName("label_8")
                self.horizontalLayout_7.addWidget(self.label_8)
                self.comboBox_7 = QtWidgets.QComboBox(self.widget)
                self.comboBox_7.setObjectName("comboBox_7")
                self.comboBox_7.addItem("")
                self.comboBox_7.addItem("")
                self.comboBox_7.addItem("")
                self.comboBox_7.addItem("")
                self.comboBox_7.addItem("")
                self.comboBox_7.addItem("")
                self.comboBox_7.addItem("")
                self.comboBox_7.addItem("")
                self.comboBox_7.addItem("")
                self.comboBox_7.addItem("")
                self.horizontalLayout_7.addWidget(self.comboBox_7)
                self.verticalLayout.addLayout(self.horizontalLayout_7)
                self.horizontalLayout_8 = QtWidgets.QHBoxLayout()
                self.horizontalLayout_8.setObjectName("horizontalLayout_8")
                self.label_9 = QtWidgets.QLabel(self.widget)
                font = QtGui.QFont()
                font.setPointSize(15)
                self.label_9.setFont(font)
                self.label_9.setObjectName("label_9")
                self.horizontalLayout_8.addWidget(self.label_9)
                self.comboBox_8 = QtWidgets.QComboBox(self.widget)
                self.comboBox_8.setObjectName("comboBox_8")
                self.comboBox_8.addItem("")
                self.comboBox_8.addItem("")
                self.comboBox_8.addItem("")
                self.comboBox_8.addItem("")
                self.comboBox_8.addItem("")
                self.comboBox_8.addItem("")
                self.comboBox_8.addItem("")
                self.comboBox_8.addItem("")
                self.comboBox_8.addItem("")
                self.comboBox_8.addItem("")
                self.horizontalLayout_8.addWidget(self.comboBox_8)
                self.verticalLayout.addLayout(self.horizontalLayout_8)
                self.horizontalLayout_9 = QtWidgets.QHBoxLayout()
                self.horizontalLayout_9.setObjectName("horizontalLayout_9")
                self.label_10 = QtWidgets.QLabel(self.widget)
                font = QtGui.QFont()
                font.setPointSize(15)
                self.label_10.setFont(font)
                self.label_10.setObjectName("label_10")
                self.horizontalLayout_9.addWidget(self.label_10)
                self.comboBox_9 = QtWidgets.QComboBox(self.widget)
                self.comboBox_9.setObjectName("comboBox_9")
                self.comboBox_9.addItem("")
                self.comboBox_9.addItem("")
                self.comboBox_9.addItem("")
                self.comboBox_9.addItem("")
                self.comboBox_9.addItem("")
                self.comboBox_9.addItem("")
                self.comboBox_9.addItem("")
                self.comboBox_9.addItem("")
                self.comboBox_9.addItem("")
                self.comboBox_9.addItem("")
                self.horizontalLayout_9.addWidget(self.comboBox_9)
                self.verticalLayout.addLayout(self.horizontalLayout_9)
                self.widget1 = QtWidgets.QWidget(ml)
                self.widget1.setGeometry(QtCore.QRect(512, 480, 151, 32))
                self.widget1.setObjectName("widget1")
                self.horizontalLayout_10 = QtWidgets.QHBoxLayout(self.widget1)
                self.horizontalLayout_10.setContentsMargins(0, 0, 0, 0)
                self.horizontalLayout_10.setObjectName("horizontalLayout_10")
                self.pushButton = QtWidgets.QPushButton(self.widget1)
                self.pushButton.setObjectName("pushButton")
                self.horizontalLayout_10.addWidget(self.pushButton)
                self.pushButton_2 = QtWidgets.QPushButton(self.widget1)
                self.pushButton_2.setObjectName("pushButton_2")
                self.horizontalLayout_10.addWidget(self.pushButton_2)
                
                self.retranslateUi(ml)
                self.pushButton_2.clicked.connect(ml.close)
                QtCore.QMetaObject.connectSlotsByName(ml)

                self.pushButton.clicked.connect(self.goo)

               



                self.comboBox.currentIndexChanged.connect(self.slot)
                self.comboBox_2.currentIndexChanged.connect(self.slot_2)
                self.comboBox_3.currentIndexChanged.connect(self.slot_3)
                self.comboBox_4.currentIndexChanged.connect(self.slot_4)
                self.comboBox_5.currentIndexChanged.connect(self.slot_5)
                self.comboBox_6.currentIndexChanged.connect(self.slot_6)
                self.comboBox_7.currentIndexChanged.connect(self.slot_7)
                self.comboBox_8.currentIndexChanged.connect(self.slot_8)
                self.comboBox_9.currentIndexChanged.connect(self.slot_9)

        def slot(self):
                global q
                q=(int(self.comboBox.currentText()))

        def slot_2(self):
                global r
                r=(int(self.comboBox_2.currentText()))
                
        def slot_3(self):
                global s
                s=(int(self.comboBox_3.currentText()))
                
        def slot_4(self):
                global t
                t=(int(self.comboBox_4.currentText()))            
                
        def slot_5(self):
                global u
                u=(int(self.comboBox_5.currentText()))
                
        def slot_6(self):
                global v
                v=(int(self.comboBox_6.currentText()))
                
        def slot_7(self):
                global w
                w=(int(self.comboBox_7.currentText()))            
                
        def slot_8(self):
                global x
                x=(int(self.comboBox_8.currentText()))
                
        def slot_9(self):
                global y
                y=(int(self.comboBox_9.currentText()))
                
        def goo(self):
                b.append(q)
                b.append(r)
                b.append(s)
                b.append(t)
                b.append(u)
                b.append(v)
                b.append(w)
                b.append(x)
                b.append(y)
                today = datetime.datetime.now()
                #print("The list is:",b)

                f = open('log.txt')
                f = f.read()
                
                stat = ""
                val=machine(b)
                if(val==[2]):
                        stat = "Benign Breast Condition"
                        self.message(stat)
                elif(val==[4]):
                        stat = "Malignant Breast Condition"
                        self.message(stat)
                entry_ml(f,q,r,s,t,u,v,w,x,y,today, stat)
                self.message("Click cancel in form to exit form")
##                self.close(ml.close)
                
        def retranslateUi(self, ml):
                _translate = QtCore.QCoreApplication.translate
                ml.setWindowTitle(_translate("ml", "Main Page"))
                self.label.setText(_translate("ml", "Enter the details for testing (Please enter carefully):"))
                self.label_2.setText(_translate("ml", "Clump thickness ="))
                self.comboBox.setItemText(0, _translate("ml", "1"))
                self.comboBox.setItemText(1, _translate("ml", "2"))
                self.comboBox.setItemText(2, _translate("ml", "3"))
                self.comboBox.setItemText(3, _translate("ml", "4"))
                self.comboBox.setItemText(4, _translate("ml", "5"))
                self.comboBox.setItemText(5, _translate("ml", "6"))
                self.comboBox.setItemText(6, _translate("ml", "7"))
                self.comboBox.setItemText(7, _translate("ml", "8"))
                self.comboBox.setItemText(8, _translate("ml", "9"))
                self.comboBox.setItemText(9, _translate("ml", "10"))
                self.label_3.setText(_translate("ml", "Uniformity of Cell Size ="))
                self.comboBox_2.setItemText(0, _translate("ml", "1"))
                self.comboBox_2.setItemText(1, _translate("ml", "2"))
                self.comboBox_2.setItemText(2, _translate("ml", "3"))
                self.comboBox_2.setItemText(3, _translate("ml", "4"))
                self.comboBox_2.setItemText(4, _translate("ml", "5"))
                self.comboBox_2.setItemText(5, _translate("ml", "6"))
                self.comboBox_2.setItemText(6, _translate("ml", "7"))
                self.comboBox_2.setItemText(7, _translate("ml", "8"))
                self.comboBox_2.setItemText(8, _translate("ml", "9"))
                self.comboBox_2.setItemText(9, _translate("ml", "10"))
                self.label_4.setText(_translate("ml", "Uniformity of Cell Shape="))
                self.comboBox_3.setItemText(0, _translate("ml", "1"))
                self.comboBox_3.setItemText(1, _translate("ml", "2"))
                self.comboBox_3.setItemText(2, _translate("ml", "3"))
                self.comboBox_3.setItemText(3, _translate("ml", "4"))
                self.comboBox_3.setItemText(4, _translate("ml", "5"))
                self.comboBox_3.setItemText(5, _translate("ml", "6"))
                self.comboBox_3.setItemText(6, _translate("ml", "7"))
                self.comboBox_3.setItemText(7, _translate("ml", "8"))
                self.comboBox_3.setItemText(8, _translate("ml", "9"))
                self.comboBox_3.setItemText(9, _translate("ml", "10"))
                self.label_5.setText(_translate("ml", "Marginal Adhesion ="))
                self.comboBox_4.setItemText(0, _translate("ml", "1"))
                self.comboBox_4.setItemText(1, _translate("ml", "2"))
                self.comboBox_4.setItemText(2, _translate("ml", "3"))
                self.comboBox_4.setItemText(3, _translate("ml", "4"))
                self.comboBox_4.setItemText(4, _translate("ml", "5"))
                self.comboBox_4.setItemText(5, _translate("ml", "6"))
                self.comboBox_4.setItemText(6, _translate("ml", "7"))
                self.comboBox_4.setItemText(7, _translate("ml", "8"))
                self.comboBox_4.setItemText(8, _translate("ml", "9"))
                self.comboBox_4.setItemText(9, _translate("ml", "10"))
                self.label_6.setText(_translate("ml", "Single Epithelial Cell Size ="))
                self.comboBox_5.setItemText(0, _translate("ml", "1"))
                self.comboBox_5.setItemText(1, _translate("ml", "2"))
                self.comboBox_5.setItemText(2, _translate("ml", "3"))
                self.comboBox_5.setItemText(3, _translate("ml", "4"))
                self.comboBox_5.setItemText(4, _translate("ml", "5"))
                self.comboBox_5.setItemText(5, _translate("ml", "6"))
                self.comboBox_5.setItemText(6, _translate("ml", "7"))
                self.comboBox_5.setItemText(7, _translate("ml", "8"))
                self.comboBox_5.setItemText(8, _translate("ml", "9"))
                self.comboBox_5.setItemText(9, _translate("ml", "10"))
                self.label_7.setText(_translate("ml", "Bare Nuclei ="))
                self.comboBox_6.setItemText(0, _translate("ml", "1"))
                self.comboBox_6.setItemText(1, _translate("ml", "2"))
                self.comboBox_6.setItemText(2, _translate("ml", "3"))
                self.comboBox_6.setItemText(3, _translate("ml", "4"))
                self.comboBox_6.setItemText(4, _translate("ml", "5"))
                self.comboBox_6.setItemText(5, _translate("ml", "6"))
                self.comboBox_6.setItemText(6, _translate("ml", "7"))
                self.comboBox_6.setItemText(7, _translate("ml", "8"))
                self.comboBox_6.setItemText(8, _translate("ml", "9"))
                self.comboBox_6.setItemText(9, _translate("ml", "10"))
                self.label_8.setText(_translate("ml", "Bland Chromatin ="))
                self.comboBox_7.setItemText(0, _translate("ml", "1"))
                self.comboBox_7.setItemText(1, _translate("ml", "2"))
                self.comboBox_7.setItemText(2, _translate("ml", "3"))
                self.comboBox_7.setItemText(3, _translate("ml", "4"))
                self.comboBox_7.setItemText(4, _translate("ml", "5"))
                self.comboBox_7.setItemText(5, _translate("ml", "6"))
                self.comboBox_7.setItemText(6, _translate("ml", "7"))
                self.comboBox_7.setItemText(7, _translate("ml", "8"))
                self.comboBox_7.setItemText(8, _translate("ml", "9"))
                self.comboBox_7.setItemText(9, _translate("ml", "10"))
                self.label_9.setText(_translate("ml", "Normal Nucleoli ="))
                self.comboBox_8.setItemText(0, _translate("ml", "1"))
                self.comboBox_8.setItemText(1, _translate("ml", "2"))
                self.comboBox_8.setItemText(2, _translate("ml", "3"))
                self.comboBox_8.setItemText(3, _translate("ml", "4"))
                self.comboBox_8.setItemText(4, _translate("ml", "5"))
                self.comboBox_8.setItemText(5, _translate("ml", "6"))
                self.comboBox_8.setItemText(6, _translate("ml", "7"))
                self.comboBox_8.setItemText(7, _translate("ml", "8"))
                self.comboBox_8.setItemText(8, _translate("ml", "9"))
                self.comboBox_8.setItemText(9, _translate("ml", "10"))
                self.label_10.setText(_translate("ml", "Mitoses ="))
                self.comboBox_9.setItemText(0, _translate("ml", "1"))
                self.comboBox_9.setItemText(1, _translate("ml", "2"))
                self.comboBox_9.setItemText(2, _translate("ml", "3"))
                self.comboBox_9.setItemText(3, _translate("ml", "4"))
                self.comboBox_9.setItemText(4, _translate("ml", "5"))
                self.comboBox_9.setItemText(5, _translate("ml", "6"))
                self.comboBox_9.setItemText(6, _translate("ml", "7"))
                self.comboBox_9.setItemText(7, _translate("ml", "8"))
                self.comboBox_9.setItemText(8, _translate("ml", "9"))
                self.comboBox_9.setItemText(9, _translate("ml", "10"))
                self.pushButton.setText(_translate("ml", "Go"))
                self.pushButton_2.setText(_translate("ml", "Cancel"))
##                self.pushButton.clicked.connect(self.lol)

if __name__ == "__main__":
    import sys
    app = QtWidgets.QApplication(sys.argv)
    ml = QtWidgets.QDialog()
    ui = Ui_ml()
    ui.setupUi(ml)
    ml.show()
##    app.exec_()
    sys.exit(app.exec_())

